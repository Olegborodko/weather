
<%= form_for :form_region, url: {controller:"works", action: "select_country"}, html: {class: "user_form"}, remote: true do |f| %>

    <div class="form-group">
      <select id="custom_select" name="form_region[country]">
        <% CS.countries.each do |i, v|  %>
            <option value="<%= i %>"><%= v %></option>
        <% end %>
      </select>

      <%#= f.select :country, CS.countries.each { |i, v| [ i, v ] }, include_blank: true %>
    </div>

    <div class="form-group">
      <%= f.text_field :name, class: "form-control", placeholder: "city" %>
    </div>
    <div class="form-group">
      <%= f.submit "select", class: "btn, btn-default" %>
    </div>
<% end %>

<br><br>

<div id="result"></div>

<% m = {"response"=>{"version"=>"0.1", "termsofService"=>"http://www.wunderground.com/weather/api/d/terms.html", "features"=>{"forecast"=>1}}, "forecast"=>{"txt_forecast"=>{"date"=>"4:11 AM PDT", "forecastday"=>[{"period"=>0, "icon"=>"clear", "icon_url"=>"http://icons.wxug.com/i/c/k/clear.gif", "title"=>"Friday", "fcttext"=>"Partly cloudy. High 77F. Winds SSW at 10 to 15 mph.", "fcttext_metric"=>"Lots of sunshine. High 24C. Winds SW at 15 to 25 km/h.", "pop"=>"0"}, {"period"=>1, "icon"=>"nt_clear", "icon_url"=>"http://icons.wxug.com/i/c/k/nt_clear.gif", "title"=>"Friday Night", "fcttext"=>"Generally clear. Low 52F. Winds light and variable.", "fcttext_metric"=>"Clear to partly cloudy. Low 11C. Winds light and variable.", "pop"=>"0"}, {"period"=>2, "icon"=>"partlycloudy", "icon_url"=>"http://icons.wxug.com/i/c/k/partlycloudy.gif", "title"=>"Saturday", "fcttext"=>"Sunshine and clouds mixed. A stray afternoon thunderstorm is possible. High 84F. Winds SSW at 5 to 10 mph.", "fcttext_metric"=>"Intervals of clouds and sunshine. A stray afternoon thunderstorm is possible. High 28C. Winds SSW at 10 to 15 km/h.", "pop"=>"20"}, {"period"=>3, "icon"=>"nt_partlycloudy", "icon_url"=>"http://icons.wxug.com/i/c/k/nt_partlycloudy.gif", "title"=>"Saturday Night", "fcttext"=>"Mostly cloudy skies early will become partly cloudy late. A stray shower or thunderstorm is possible. Low 58F. Winds light and variable.", "fcttext_metric"=>"Mostly cloudy skies early, then partly cloudy after midnight. A stray shower or thunderstorm is possible. Low 14C. Winds light and variable.", "pop"=>"20"}, {"period"=>4, "icon"=>"cloudy", "icon_url"=>"http://icons.wxug.com/i/c/k/cloudy.gif", "title"=>"Sunday", "fcttext"=>"Cloudy. A stray shower or thunderstorm is possible. High 71F. Winds SW at 5 to 10 mph.", "fcttext_metric"=>"Cloudy. A stray shower or thunderstorm is possible. High 21C. Winds SW at 10 to 15 km/h.", "pop"=>"20"}, {"period"=>5, "icon"=>"nt_partlycloudy", "icon_url"=>"http://icons.wxug.com/i/c/k/nt_partlycloudy.gif", "title"=>"Sunday Night", "fcttext"=>"Partly cloudy. Low around 50F. Winds SSW at 5 to 10 mph.", "fcttext_metric"=>"Partly cloudy. Low near 10C. Winds SSW at 10 to 15 km/h.", "pop"=>"20"}, {"period"=>6, "icon"=>"clear", "icon_url"=>"http://icons.wxug.com/i/c/k/clear.gif", "title"=>"Monday", "fcttext"=>"Sunny skies. High 72F. Winds SSW at 10 to 15 mph.", "fcttext_metric"=>"Abundant sunshine. High 22C. Winds SSW at 15 to 25 km/h.", "pop"=>"10"}, {"period"=>7, "icon"=>"nt_partlycloudy", "icon_url"=>"http://icons.wxug.com/i/c/k/nt_partlycloudy.gif", "title"=>"Monday Night", "fcttext"=>"A few clouds. Low 51F. Winds light and variable.", "fcttext_metric"=>"A few clouds. Low 11C. Winds light and variable.", "pop"=>"0"}]}, "simpleforecast"=>{"forecastday"=>[{"date"=>{"epoch"=>"1496455200", "pretty"=>"7:00 PM PDT on June 02, 2017", "day"=>2, "month"=>6, "year"=>2017, "yday"=>152, "hour"=>19, "min"=>"00", "sec"=>0, "isdst"=>"1", "monthname"=>"June", "monthname_short"=>"Jun", "weekday_short"=>"Fri", "weekday"=>"Friday", "ampm"=>"PM", "tz_short"=>"PDT", "tz_long"=>"America/Los_Angeles"}, "period"=>1, "high"=>{"fahrenheit"=>"77", "celsius"=>"25"}, "low"=>{"fahrenheit"=>"52", "celsius"=>"11"}, "conditions"=>"Clear", "icon"=>"clear", "icon_url"=>"http://icons.wxug.com/i/c/k/clear.gif", "skyicon"=>"", "pop"=>0, "qpf_allday"=>{"in"=>0.0, "mm"=>0}, "qpf_day"=>{"in"=>0.0, "mm"=>0}, "qpf_night"=>{"in"=>0.0, "mm"=>0}, "snow_allday"=>{"in"=>0.0, "cm"=>0.0}, "snow_day"=>{"in"=>0.0, "cm"=>0.0}, "snow_night"=>{"in"=>0.0, "cm"=>0.0}, "maxwind"=>{"mph"=>15, "kph"=>24, "dir"=>"SSW", "degrees"=>213}, "avewind"=>{"mph"=>12, "kph"=>19, "dir"=>"SSW", "degrees"=>213}, "avehumidity"=>50, "maxhumidity"=>0, "minhumidity"=>0}, {"date"=>{"epoch"=>"1496541600", "pretty"=>"7:00 PM PDT on June 03, 2017", "day"=>3, "month"=>6, "year"=>2017, "yday"=>153, "hour"=>19, "min"=>"00", "sec"=>0, "isdst"=>"1", "monthname"=>"June", "monthname_short"=>"Jun", "weekday_short"=>"Sat", "weekday"=>"Saturday", "ampm"=>"PM", "tz_short"=>"PDT", "tz_long"=>"America/Los_Angeles"}, "period"=>2, "high"=>{"fahrenheit"=>"84", "celsius"=>"29"}, "low"=>{"fahrenheit"=>"58", "celsius"=>"14"}, "conditions"=>"Partly Cloudy", "icon"=>"partlycloudy", "icon_url"=>"http://icons.wxug.com/i/c/k/partlycloudy.gif", "skyicon"=>"", "pop"=>20, "qpf_allday"=>{"in"=>0.0, "mm"=>0}, "qpf_day"=>{"in"=>0.0, "mm"=>0}, "qpf_night"=>{"in"=>0.0, "mm"=>0}, "snow_allday"=>{"in"=>0.0, "cm"=>0.0}, "snow_day"=>{"in"=>0.0, "cm"=>0.0}, "snow_night"=>{"in"=>0.0, "cm"=>0.0}, "maxwind"=>{"mph"=>10, "kph"=>16, "dir"=>"SSW", "degrees"=>196}, "avewind"=>{"mph"=>7, "kph"=>11, "dir"=>"SSW", "degrees"=>196}, "avehumidity"=>39, "maxhumidity"=>0, "minhumidity"=>0}, {"date"=>{"epoch"=>"1496628000", "pretty"=>"7:00 PM PDT on June 04, 2017", "day"=>4, "month"=>6, "year"=>2017, "yday"=>154, "hour"=>19, "min"=>"00", "sec"=>0, "isdst"=>"1", "monthname"=>"June", "monthname_short"=>"Jun", "weekday_short"=>"Sun", "weekday"=>"Sunday", "ampm"=>"PM", "tz_short"=>"PDT", "tz_long"=>"America/Los_Angeles"}, "period"=>3, "high"=>{"fahrenheit"=>"71", "celsius"=>"22"}, "low"=>{"fahrenheit"=>"50", "celsius"=>"10"}, "conditions"=>"Overcast", "icon"=>"cloudy", "icon_url"=>"http://icons.wxug.com/i/c/k/cloudy.gif", "skyicon"=>"", "pop"=>20, "qpf_allday"=>{"in"=>0.0, "mm"=>0}, "qpf_day"=>{"in"=>0.0, "mm"=>0}, "qpf_night"=>{"in"=>0.0, "mm"=>0}, "snow_allday"=>{"in"=>0.0, "cm"=>0.0}, "snow_day"=>{"in"=>0.0, "cm"=>0.0}, "snow_night"=>{"in"=>0.0, "cm"=>0.0}, "maxwind"=>{"mph"=>10, "kph"=>16, "dir"=>"SW", "degrees"=>217}, "avewind"=>{"mph"=>9, "kph"=>14, "dir"=>"SW", "degrees"=>217}, "avehumidity"=>57, "maxhumidity"=>0, "minhumidity"=>0}, {"date"=>{"epoch"=>"1496714400", "pretty"=>"7:00 PM PDT on June 05, 2017", "day"=>5, "month"=>6, "year"=>2017, "yday"=>155, "hour"=>19, "min"=>"00", "sec"=>0, "isdst"=>"1", "monthname"=>"June", "monthname_short"=>"Jun", "weekday_short"=>"Mon", "weekday"=>"Monday", "ampm"=>"PM", "tz_short"=>"PDT", "tz_long"=>"America/Los_Angeles"}, "period"=>4, "high"=>{"fahrenheit"=>"72", "celsius"=>"22"}, "low"=>{"fahrenheit"=>"51", "celsius"=>"11"}, "conditions"=>"Clear", "icon"=>"clear", "icon_url"=>"http://icons.wxug.com/i/c/k/clear.gif", "skyicon"=>"", "pop"=>10, "qpf_allday"=>{"in"=>0.0, "mm"=>0}, "qpf_day"=>{"in"=>0.0, "mm"=>0}, "qpf_night"=>{"in"=>0.0, "mm"=>0}, "snow_allday"=>{"in"=>0.0, "cm"=>0.0}, "snow_day"=>{"in"=>0.0, "cm"=>0.0}, "snow_night"=>{"in"=>0.0, "cm"=>0.0}, "maxwind"=>{"mph"=>15, "kph"=>24, "dir"=>"SSW", "degrees"=>209}, "avewind"=>{"mph"=>10, "kph"=>16, "dir"=>"SSW", "degrees"=>209}, "avehumidity"=>44, "maxhumidity"=>0, "minhumidity"=>0}]}}} %>
<pre><%# = JSON.pretty_generate(m['forecast']['simpleforecast']['forecastday'].first['high']['celsius']) %></pre>
<pre><%# = JSON.pretty_generate(m['forecast']['simpleforecast']['forecastday'].first['conditions']) %></pre>
